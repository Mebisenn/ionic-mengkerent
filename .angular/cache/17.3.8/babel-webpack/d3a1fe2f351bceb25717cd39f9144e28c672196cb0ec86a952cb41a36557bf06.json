{"ast":null,"code":"import _asyncToGenerator from \"C:/project_mengkerent/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HttpHeaders } from '@angular/common/http';\nimport { throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@ionic/storage-angular\";\nexport let PromoService = /*#__PURE__*/(() => {\n  var _PromoService;\n  class PromoService {\n    constructor(http, storage) {\n      this.http = http;\n      this.storage = storage;\n      this.apiUrl = 'https://www.sipelantis.com/api/data-content';\n    }\n    getPromo() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const token = yield _this.storage.get('auth-token');\n          if (!token) {\n            throw new Error('Unauthorized: Token not found.');\n          }\n          const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n          return _this.http.get(_this.apiUrl, {\n            headers\n          }).pipe(catchError(error => {\n            if (error.status === 401) {\n              return throwError(() => new Error('Unauthorized: Please login to access promos.'));\n            } else {\n              return throwError(() => new Error('Error fetching promo: ' + error.message));\n            }\n          })).toPromise();\n        } catch (error) {\n          throw new Error('Error fetching promo: ' + error.message);\n        }\n      })();\n    }\n    addPromo(title, content) {\n      const addUrl = 'https://www.sipelantis.com/api/promo/add';\n      return this.http.post(addUrl, {\n        title,\n        content\n      }).pipe(catchError(error => {\n        return throwError(() => new Error('Error adding promo: ' + error.message));\n      }));\n    }\n  }\n  _PromoService = PromoService;\n  _PromoService.ɵfac = function PromoService_Factory(t) {\n    return new (t || _PromoService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Storage));\n  };\n  _PromoService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: _PromoService,\n    factory: _PromoService.ɵfac,\n    providedIn: 'root'\n  });\n  return PromoService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}