{"ast":null,"code":"import _asyncToGenerator from \"C:/project_mengkerent/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@ionic/storage-angular\";\nimport * as i4 from \"@ionic/angular\";\nimport * as i5 from \"@angular/forms\";\nexport let EditProfilePage = /*#__PURE__*/(() => {\n  var _EditProfilePage;\n  class EditProfilePage {\n    constructor(router, http, storage, alertController) {\n      this.router = router;\n      this.http = http;\n      this.storage = storage;\n      this.alertController = alertController;\n      this.user = {\n        name: '',\n        email: '',\n        password: '',\n        gender: '',\n        no_telfon: '',\n        pekerjaan: '',\n        alamat: ''\n      };\n      this.userId = null;\n      this.initStorage();\n    }\n    initStorage() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.storage.create();\n      })();\n    }\n    ngOnInit() {\n      this.loadUserProfile();\n    }\n    loadUserProfile() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const token = yield _this2.storage.get('auth-token');\n        _this2.userId = yield _this2.storage.get('user-id');\n        console.log('Retrieved token:', token);\n        console.log('Retrieved userId:', _this2.userId);\n        if (!token) {\n          console.error('No authentication token found');\n          return;\n        }\n        if (!_this2.userId) {\n          console.error('No user ID found');\n          return;\n        }\n        const headers = new HttpHeaders({\n          'Authorization': `Bearer ${token}`\n        });\n        _this2.http.get(`https://www.sipelantis.com/api/users/${_this2.userId}`, {\n          headers\n        }).subscribe(response => {\n          _this2.user = response.user;\n          console.log('User profile loaded:', _this2.user);\n        }, error => {\n          console.error('Error loading user profile:', error);\n        });\n      })();\n    }\n    saveProfile() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const token = yield _this3.storage.get('auth-token');\n        if (!token) {\n          console.error('No authentication token found');\n          return;\n        }\n        const headers = new HttpHeaders({\n          'Authorization': `Bearer ${token}`\n        });\n        _this3.http.put(`https://www.sipelantis.com/api/users/${_this3.userId}`, _this3.user, {\n          headers\n        }).subscribe( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator(function* (response) {\n            const alert = yield _this3.alertController.create({\n              header: 'Success',\n              message: 'Profile updated successfully',\n              buttons: ['OK']\n            });\n            yield alert.present();\n            _this3.router.navigate(['/profile']);\n          });\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }(), /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator(function* (error) {\n            console.error('Error saving user profile:', error);\n            if (error.status === 422) {\n              console.error('Validation error:', error.error);\n            }\n            const alert = yield _this3.alertController.create({\n              header: 'Error',\n              message: 'There was an error updating your profile. Please try again.',\n              buttons: ['OK']\n            });\n            yield alert.present();\n          });\n          return function (_x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }());\n      })();\n    }\n    home() {\n      this.router.navigate(['/home']);\n    }\n    order() {\n      this.router.navigate(['/cars']);\n    }\n    transaksi() {\n      this.router.navigate(['/transaksi']);\n    }\n    profile() {\n      this.router.navigate(['/profile']);\n    }\n  }\n  _EditProfilePage = EditProfilePage;\n  _EditProfilePage.ɵfac = function EditProfilePage_Factory(t) {\n    return new (t || _EditProfilePage)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.Storage), i0.ɵɵdirectiveInject(i4.AlertController));\n  };\n  _EditProfilePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _EditProfilePage,\n    selectors: [[\"app-edit-profile\"]],\n    decls: 40,\n    vars: 7,\n    consts: [[\"color\", \"medium\"], [2, \"background-color\", \"#6c71f7\"], [\"label\", \"Name\", \"labelPlacement\", \"stacked\", 3, \"ngModelChange\", \"ngModel\"], [\"label\", \"Email\", \"labelPlacement\", \"stacked\", 3, \"ngModelChange\", \"ngModel\"], [\"label\", \"Password\", \"labelPlacement\", \"stacked\", \"type\", \"password\", 3, \"ngModelChange\", \"ngModel\"], [\"label\", \"Gender\", \"labelPlacement\", \"stacked\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"Laki-laki\"], [\"value\", \"Perempuan\"], [\"label\", \"No Telfon\", \"labelPlacement\", \"stacked\", 3, \"ngModelChange\", \"ngModel\"], [\"label\", \"Pekerjaan\", \"labelPlacement\", \"stacked\", 3, \"ngModelChange\", \"ngModel\"], [\"label\", \"Alamat\", \"labelPlacement\", \"stacked\", 3, \"ngModelChange\", \"ngModel\"], [\"expand\", \"block\", 3, \"click\"], [\"id\", \"tabs\"], [\"slot\", \"bottom\"], [\"id\", \"home\", \"tab\", \"home\", 3, \"click\"], [\"name\", \"home-outline\"], [\"tab\", \"radio\", 3, \"click\"], [\"name\", \"car-outline\"], [\"tab\", \"transaksi\", 3, \"click\"], [\"name\", \"cash-outline\"], [\"tab\", \"library\", 3, \"click\"], [\"name\", \"person-outline\"]],\n    template: function EditProfilePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-content\", 0)(1, \"ion-card\", 1)(2, \"ion-card-header\")(3, \"ion-card-title\");\n        i0.ɵɵtext(4, \"Edit Profile \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"ion-card-content\")(6, \"ion-item\")(7, \"ion-input\", 2);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function EditProfilePage_Template_ion_input_ngModelChange_7_listener($event) {\n          i0.ɵɵtwoWayBindingSet(ctx.user.name, $event) || (ctx.user.name = $event);\n          return $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"ion-item\")(9, \"ion-input\", 3);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function EditProfilePage_Template_ion_input_ngModelChange_9_listener($event) {\n          i0.ɵɵtwoWayBindingSet(ctx.user.email, $event) || (ctx.user.email = $event);\n          return $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"ion-item\")(11, \"ion-input\", 4);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function EditProfilePage_Template_ion_input_ngModelChange_11_listener($event) {\n          i0.ɵɵtwoWayBindingSet(ctx.user.password, $event) || (ctx.user.password = $event);\n          return $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"ion-item\")(13, \"ion-select\", 5);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function EditProfilePage_Template_ion_select_ngModelChange_13_listener($event) {\n          i0.ɵɵtwoWayBindingSet(ctx.user.gender, $event) || (ctx.user.gender = $event);\n          return $event;\n        });\n        i0.ɵɵelementStart(14, \"ion-select-option\", 6);\n        i0.ɵɵtext(15, \"Laki-laki\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"ion-select-option\", 7);\n        i0.ɵɵtext(17, \"Perempuan\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"ion-item\")(19, \"ion-input\", 8);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function EditProfilePage_Template_ion_input_ngModelChange_19_listener($event) {\n          i0.ɵɵtwoWayBindingSet(ctx.user.no_telfon, $event) || (ctx.user.no_telfon = $event);\n          return $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"ion-item\")(21, \"ion-input\", 9);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function EditProfilePage_Template_ion_input_ngModelChange_21_listener($event) {\n          i0.ɵɵtwoWayBindingSet(ctx.user.pekerjaan, $event) || (ctx.user.pekerjaan = $event);\n          return $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"ion-item\")(23, \"ion-input\", 10);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function EditProfilePage_Template_ion_input_ngModelChange_23_listener($event) {\n          i0.ɵɵtwoWayBindingSet(ctx.user.alamat, $event) || (ctx.user.alamat = $event);\n          return $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"ion-button\", 11);\n        i0.ɵɵlistener(\"click\", function EditProfilePage_Template_ion_button_click_24_listener() {\n          return ctx.saveProfile();\n        });\n        i0.ɵɵtext(25, \"Save Profile\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(26, \"div\", 12)(27, \"ion-tab-bar\", 13)(28, \"ion-tab-button\", 14);\n        i0.ɵɵlistener(\"click\", function EditProfilePage_Template_ion_tab_button_click_28_listener() {\n          return ctx.home();\n        });\n        i0.ɵɵelement(29, \"ion-icon\", 15);\n        i0.ɵɵtext(30, \" Home \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"ion-tab-button\", 16);\n        i0.ɵɵlistener(\"click\", function EditProfilePage_Template_ion_tab_button_click_31_listener() {\n          return ctx.order();\n        });\n        i0.ɵɵelement(32, \"ion-icon\", 17);\n        i0.ɵɵtext(33, \" Order \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"ion-tab-button\", 18);\n        i0.ɵɵlistener(\"click\", function EditProfilePage_Template_ion_tab_button_click_34_listener() {\n          return ctx.transaksi();\n        });\n        i0.ɵɵelement(35, \"ion-icon\", 19);\n        i0.ɵɵtext(36, \" Transaksi \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"ion-tab-button\", 20);\n        i0.ɵɵlistener(\"click\", function EditProfilePage_Template_ion_tab_button_click_37_listener() {\n          return ctx.profile();\n        });\n        i0.ɵɵelement(38, \"ion-icon\", 21);\n        i0.ɵɵtext(39, \" Profile \");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.email);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.password);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.gender);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.no_telfon);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.pekerjaan);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.alamat);\n      }\n    },\n    dependencies: [i5.NgControlStatus, i5.NgModel, i4.IonButton, i4.IonCard, i4.IonCardContent, i4.IonCardHeader, i4.IonCardTitle, i4.IonContent, i4.IonIcon, i4.IonInput, i4.IonItem, i4.IonSelect, i4.IonSelectOption, i4.IonTabBar, i4.IonTabButton, i4.SelectValueAccessor, i4.TextValueAccessor],\n    styles: [\"ion-card-header[_ngcontent-%COMP%]{text-align:center}ion-card[_ngcontent-%COMP%]{top:50%;transform:translateY(-50%)}\"]\n  });\n  return EditProfilePage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}