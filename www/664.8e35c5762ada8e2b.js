"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[664],{664:(E,p,l)=>{l.r(p),l.d(p,{EditProfilePageModule:()=>b});var P=l(177),c=l(4341),i=l(5150),f=l(8465),g=l(467),m=l(1626),e=l(4438),h=l(369);const k=[{path:"",component:(()=>{var r;class s{constructor(t,o,a,n){this.router=t,this.http=o,this.storage=a,this.alertController=n,this.user={name:"",email:"",password:"",gender:"",no_telfon:"",pekerjaan:"",alamat:""},this.userId=null,this.initStorage()}initStorage(){var t=this;return(0,g.A)(function*(){yield t.storage.create()})()}ngOnInit(){this.loadUserProfile()}loadUserProfile(){var t=this;return(0,g.A)(function*(){const o=yield t.storage.get("auth-token");if(t.userId=yield t.storage.get("user-id"),console.log("Retrieved token:",o),console.log("Retrieved userId:",t.userId),!o)return void console.error("No authentication token found");if(!t.userId)return void console.error("No user ID found");const a=new m.Lr({Authorization:`Bearer ${o}`});t.http.get(`https://www.sipelantis.com/api/users/${t.userId}`,{headers:a}).subscribe(n=>{t.user=n.user,console.log("User profile loaded:",t.user)},n=>{console.error("Error loading user profile:",n)})})()}saveProfile(){var t=this;return(0,g.A)(function*(){const o=yield t.storage.get("auth-token");if(!o)return void console.error("No authentication token found");const a=new m.Lr({Authorization:`Bearer ${o}`});t.http.put(`https://www.sipelantis.com/api/users/${t.userId}`,t.user,{headers:a}).subscribe(function(){var n=(0,g.A)(function*(d){yield(yield t.alertController.create({header:"Success",message:"Profile updated successfully",buttons:["OK"]})).present(),t.router.navigate(["/profile"])});return function(d){return n.apply(this,arguments)}}(),function(){var n=(0,g.A)(function*(d){console.error("Error saving user profile:",d),422===d.status&&console.error("Validation error:",d.error),yield(yield t.alertController.create({header:"Error",message:"There was an error updating your profile. Please try again.",buttons:["OK"]})).present()});return function(d){return n.apply(this,arguments)}}())})()}home(){this.router.navigate(["/home"])}order(){this.router.navigate(["/cars"])}transaksi(){this.router.navigate(["/transaksi"])}profile(){this.router.navigate(["/profile"])}}return(r=s).\u0275fac=function(t){return new(t||r)(e.rXU(f.Ix),e.rXU(m.Qq),e.rXU(h.w),e.rXU(i.hG))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-edit-profile"]],decls:40,vars:7,consts:[["color","medium"],[2,"background-color","#6c71f7"],["label","Name","labelPlacement","stacked",3,"ngModelChange","ngModel"],["label","Email","labelPlacement","stacked",3,"ngModelChange","ngModel"],["label","Password","labelPlacement","stacked","type","password",3,"ngModelChange","ngModel"],["label","Gender","labelPlacement","stacked",3,"ngModelChange","ngModel"],["value","Laki-laki"],["value","Perempuan"],["label","No Telfon","labelPlacement","stacked",3,"ngModelChange","ngModel"],["label","Pekerjaan","labelPlacement","stacked",3,"ngModelChange","ngModel"],["label","Alamat","labelPlacement","stacked",3,"ngModelChange","ngModel"],["expand","block",3,"click"],["id","tabs"],["slot","bottom"],["id","home","tab","home",3,"click"],["name","home-outline"],["tab","radio",3,"click"],["name","car-outline"],["tab","transaksi",3,"click"],["name","cash-outline"],["tab","library",3,"click"],["name","person-outline"]],template:function(t,o){1&t&&(e.j41(0,"ion-content",0)(1,"ion-card",1)(2,"ion-card-header")(3,"ion-card-title"),e.EFF(4,"Edit Profile "),e.k0s()(),e.j41(5,"ion-card-content")(6,"ion-item")(7,"ion-input",2),e.mxI("ngModelChange",function(n){return e.DH7(o.user.name,n)||(o.user.name=n),n}),e.k0s()(),e.j41(8,"ion-item")(9,"ion-input",3),e.mxI("ngModelChange",function(n){return e.DH7(o.user.email,n)||(o.user.email=n),n}),e.k0s()(),e.j41(10,"ion-item")(11,"ion-input",4),e.mxI("ngModelChange",function(n){return e.DH7(o.user.password,n)||(o.user.password=n),n}),e.k0s()(),e.j41(12,"ion-item")(13,"ion-select",5),e.mxI("ngModelChange",function(n){return e.DH7(o.user.gender,n)||(o.user.gender=n),n}),e.j41(14,"ion-select-option",6),e.EFF(15,"Laki-laki"),e.k0s(),e.j41(16,"ion-select-option",7),e.EFF(17,"Perempuan"),e.k0s()()(),e.j41(18,"ion-item")(19,"ion-input",8),e.mxI("ngModelChange",function(n){return e.DH7(o.user.no_telfon,n)||(o.user.no_telfon=n),n}),e.k0s()(),e.j41(20,"ion-item")(21,"ion-input",9),e.mxI("ngModelChange",function(n){return e.DH7(o.user.pekerjaan,n)||(o.user.pekerjaan=n),n}),e.k0s()(),e.j41(22,"ion-item")(23,"ion-input",10),e.mxI("ngModelChange",function(n){return e.DH7(o.user.alamat,n)||(o.user.alamat=n),n}),e.k0s()(),e.j41(24,"ion-button",11),e.bIt("click",function(){return o.saveProfile()}),e.EFF(25,"Save Profile"),e.k0s()()()(),e.j41(26,"div",12)(27,"ion-tab-bar",13)(28,"ion-tab-button",14),e.bIt("click",function(){return o.home()}),e.nrm(29,"ion-icon",15),e.EFF(30," Home "),e.k0s(),e.j41(31,"ion-tab-button",16),e.bIt("click",function(){return o.order()}),e.nrm(32,"ion-icon",17),e.EFF(33," Order "),e.k0s(),e.j41(34,"ion-tab-button",18),e.bIt("click",function(){return o.transaksi()}),e.nrm(35,"ion-icon",19),e.EFF(36," Transaksi "),e.k0s(),e.j41(37,"ion-tab-button",20),e.bIt("click",function(){return o.profile()}),e.nrm(38,"ion-icon",21),e.EFF(39," Profile "),e.k0s()()()),2&t&&(e.R7$(7),e.R50("ngModel",o.user.name),e.R7$(2),e.R50("ngModel",o.user.email),e.R7$(2),e.R50("ngModel",o.user.password),e.R7$(2),e.R50("ngModel",o.user.gender),e.R7$(6),e.R50("ngModel",o.user.no_telfon),e.R7$(2),e.R50("ngModel",o.user.pekerjaan),e.R7$(2),e.R50("ngModel",o.user.alamat))},dependencies:[c.BC,c.vS,i.Jm,i.b_,i.I9,i.ME,i.tN,i.W9,i.iq,i.$w,i.uz,i.Nm,i.Ip,i.Jq,i.qW,i.Je,i.Gw],styles:["ion-card-header[_ngcontent-%COMP%]{text-align:center}ion-card[_ngcontent-%COMP%]{top:50%;transform:translateY(-50%)}"]}),s})()}];let _=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[f.iI.forChild(k),f.iI]}),s})(),b=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[P.MD,c.YN,i.bv,_]}),s})()}}]);