"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3936],{3936:(S,_,u)=>{u.r(_),u.d(_,{TransaksiPageModule:()=>y});var d=u(177),p=u(4341),i=u(5150),k=u(8465),g=u(467),m=u(1626),n=u(4438),b=u(369);function F(t,s){if(1&t){const e=n.RV6();n.j41(0,"ion-card")(1,"ion-card-content")(2,"div",17)(3,"div",18)(4,"h1"),n.EFF(5),n.k0s(),n.j41(6,"p",19),n.nrm(7,"ion-icon",20),n.EFF(8),n.k0s(),n.j41(9,"div",21)(10,"p"),n.nrm(11,"ion-icon",22),n.EFF(12),n.k0s(),n.j41(13,"p",23),n.EFF(14),n.k0s(),n.j41(15,"p",23),n.EFF(16),n.k0s()()(),n.j41(17,"ion-button",24),n.bIt("click",function(){const o=n.eBV(e).$implicit,r=n.XpG(2);return n.Njj(r.cancelTransaction(o.id))}),n.EFF(18," Cancel "),n.k0s()()()()}if(2&t){const e=s.$implicit;n.R7$(5),n.JRh(e.nama_mobil),n.R7$(3),n.SpI(" ",e.durasi,""),n.R7$(4),n.SpI(" ",e.pelayanan,""),n.R7$(2),n.JRh(e.plat_mobil),n.R7$(2),n.SpI("Rp",e.harga,"")}}function T(t,s){if(1&t&&(n.j41(0,"div"),n.DNE(1,F,19,5,"ion-card",16),n.k0s()),2&t){const e=n.XpG();n.R7$(),n.Y8G("ngForOf",e.transactions.booking)}}function v(t,s){if(1&t&&(n.j41(0,"ion-card")(1,"ion-card-content")(2,"div",17)(3,"div",18)(4,"h1"),n.EFF(5),n.k0s(),n.j41(6,"p",19),n.nrm(7,"ion-icon",20),n.EFF(8),n.k0s(),n.j41(9,"div",21)(10,"p"),n.nrm(11,"ion-icon",22),n.EFF(12),n.k0s(),n.j41(13,"p",23),n.EFF(14),n.k0s(),n.j41(15,"p",23),n.EFF(16),n.k0s()()()()()()),2&t){const e=s.$implicit;n.R7$(5),n.JRh(e.nama_mobil),n.R7$(3),n.SpI(" ",e.durasi,""),n.R7$(4),n.SpI(" ",e.pelayanan,""),n.R7$(2),n.JRh(e.plat_mobil),n.R7$(2),n.SpI("Rp",e.harga,"/Day")}}function R(t,s){if(1&t&&(n.j41(0,"div"),n.DNE(1,v,17,5,"ion-card",16),n.k0s()),2&t){const e=n.XpG();n.R7$(),n.Y8G("ngForOf",e.transactions.proses)}}function j(t,s){if(1&t&&(n.j41(0,"ion-card")(1,"ion-card-content")(2,"div",17)(3,"div",18)(4,"h1"),n.EFF(5),n.k0s(),n.j41(6,"p",19),n.nrm(7,"ion-icon",20),n.EFF(8),n.k0s(),n.j41(9,"div",21)(10,"p"),n.nrm(11,"ion-icon",22),n.EFF(12),n.k0s(),n.j41(13,"p",23),n.EFF(14),n.k0s(),n.j41(15,"p",23),n.EFF(16),n.k0s(),n.j41(17,"p",23),n.EFF(18),n.k0s()()()()()()),2&t){const e=s.$implicit;n.R7$(5),n.JRh(e.nama_mobil),n.R7$(3),n.SpI(" ",e.durasi,""),n.R7$(4),n.SpI(" ",e.pelayanan,""),n.R7$(2),n.JRh(e.plat_mobil),n.R7$(2),n.SpI("Rp",e.harga,"/Day"),n.R7$(2),n.JRh(e.status)}}function P(t,s){if(1&t&&(n.j41(0,"div"),n.DNE(1,j,19,6,"ion-card",16),n.k0s()),2&t){const e=n.XpG();n.R7$(),n.Y8G("ngForOf",e.transactions.selesai)}}const $=[{path:"",component:(()=>{var t;class s{constructor(a,o,r,l,c){this.router=a,this.http=o,this.storage=r,this.alertController=l,this.toastController=c,this.selectedSegment="booking",this.transactions={booking:[],proses:[],selesai:[]},this.initStorage()}initStorage(){var a=this;return(0,g.A)(function*(){yield a.storage.create()})()}ngOnInit(){this.loadTransactions()}loadTransactions(){var a=this;return(0,g.A)(function*(){const o=yield a.storage.get("auth-token"),r=yield a.storage.get("user-id");if(!o)return void console.error("No authentication token found");if(!r)return void console.error("No user ID found");const l=new m.Lr({Authorization:`Bearer ${o}`});a.http.get(`https://www.sipelantis.com/api/users/${r}/transactions`,{headers:l}).subscribe(c=>{a.transactions.booking=c.booking,a.transactions.proses=c.proses,console.log("Booking Transactions:",a.transactions.booking),console.log("Proses Transactions:",a.transactions.proses)},c=>{console.error("Error loading transactions:",c)}),a.http.get(`https://www.sipelantis.com/api/order-history/${r}`,{headers:l}).subscribe(c=>{a.transactions.selesai=c.orderHistories,console.log("Order Histories:",a.transactions.selesai)},c=>{console.error("Error loading order histories:",c)})})()}segmentChanged(a){this.selectedSegment=a.detail.value}cancelTransaction(a){var o=this;return(0,g.A)(function*(){var l;yield(yield o.alertController.create({header:"Confirm Cancel",message:"Are you sure you want to cancel this transaction?",buttons:[{text:"No",role:"cancel"},{text:"Yes",handler:(l=(0,g.A)(function*(){const c=yield o.storage.get("auth-token"),C=new m.Lr({Authorization:`Bearer ${c}`});o.http.delete(`https://www.sipelantis.com/api/order/${a}/cancel`,{headers:C}).subscribe(function(){var h=(0,g.A)(function*(f){(yield o.toastController.create({message:"Transaction cancelled successfully.",duration:2e3,color:"success"})).present(),o.loadTransactions()});return function(f){return h.apply(this,arguments)}}(),function(){var h=(0,g.A)(function*(f){(yield o.toastController.create({message:"Failed to cancel transaction.",duration:2e3,color:"danger"})).present()});return function(f){return h.apply(this,arguments)}}())}),function(){return l.apply(this,arguments)})}]})).present()})()}home(){this.router.navigate(["/home"])}order(){this.router.navigate(["/cars"])}transaksi(){this.router.navigate(["/transaksi"])}profile(){this.router.navigate(["/profile"])}}return(t=s).\u0275fac=function(a){return new(a||t)(n.rXU(k.Ix),n.rXU(m.Qq),n.rXU(b.w),n.rXU(i.hG),n.rXU(i.K_))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-transaksi"]],decls:36,vars:4,consts:[[2,"background","blue"],[3,"ngModelChange","ionChange","ngModel"],["value","booking"],["value","proses"],["value","selesai"],[4,"ngIf"],["id","tabs"],["slot","bottom"],["tab","home",3,"click"],["name","home-outline"],["tab","radio",3,"click"],["name","car-outline"],["tab","transaksi",3,"click"],["name","cash-outline"],["tab","library",3,"click"],["name","person-outline"],[4,"ngFor","ngForOf"],[1,"car-card"],[1,"spek"],[1,"seats"],["name","bed-outline"],[1,"price"],["name","cog-outline"],[1,"cash"],["expand","block","color","danger",3,"click"]],template:function(a,o){1&a&&(n.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),n.EFF(3,"Transaksi"),n.k0s()()(),n.j41(4,"ion-content")(5,"ion-segment",1),n.mxI("ngModelChange",function(l){return n.DH7(o.selectedSegment,l)||(o.selectedSegment=l),l}),n.bIt("ionChange",function(l){return o.segmentChanged(l)}),n.j41(6,"ion-segment-button",2)(7,"ion-label"),n.EFF(8,"Booking"),n.k0s()(),n.j41(9,"ion-segment-button",3)(10,"ion-label"),n.EFF(11,"Proses"),n.k0s()(),n.j41(12,"ion-segment-button",4)(13,"ion-label"),n.EFF(14,"Selesai"),n.k0s()()(),n.DNE(15,T,2,1,"div",5)(16,R,2,1,"div",5)(17,P,2,1,"div",5),n.k0s(),n.j41(18,"div",6)(19,"ion-tab-bar",7)(20,"ion-tab-button",8),n.bIt("click",function(){return o.home()}),n.nrm(21,"ion-icon",9),n.j41(22,"ion-label"),n.EFF(23,"Home"),n.k0s()(),n.j41(24,"ion-tab-button",10),n.bIt("click",function(){return o.order()}),n.nrm(25,"ion-icon",11),n.j41(26,"ion-label"),n.EFF(27,"Order"),n.k0s()(),n.j41(28,"ion-tab-button",12),n.bIt("click",function(){return o.transaksi()}),n.nrm(29,"ion-icon",13),n.j41(30,"ion-label"),n.EFF(31,"Transaksi"),n.k0s()(),n.j41(32,"ion-tab-button",14),n.bIt("click",function(){return o.profile()}),n.nrm(33,"ion-icon",15),n.j41(34,"ion-label"),n.EFF(35,"Profile"),n.k0s()()()()),2&a&&(n.R7$(5),n.R50("ngModel",o.selectedSegment),n.R7$(10),n.Y8G("ngIf","booking"===o.selectedSegment),n.R7$(),n.Y8G("ngIf","proses"===o.selectedSegment),n.R7$(),n.Y8G("ngIf","selesai"===o.selectedSegment))},dependencies:[d.Sq,d.bT,p.BC,p.vS,i.Jm,i.b_,i.I9,i.W9,i.eU,i.iq,i.he,i.Gp,i.eP,i.Jq,i.qW,i.BC,i.ai,i.Je],styles:["ion-header[_ngcontent-%COMP%]{background:#0ff;text-align:center}ion-card[_ngcontent-%COMP%]{background-color:#6c71f7;align-items:center}.car-card[_ngcontent-%COMP%]{background-color:#6c71f7;color:#000}h1[_ngcontent-%COMP%]{font-weight:700}"]}),s})()}];let E=(()=>{var t;class s{}return(t=s).\u0275fac=function(a){return new(a||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[k.iI.forChild($),k.iI]}),s})(),y=(()=>{var t;class s{}return(t=s).\u0275fac=function(a){return new(a||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[d.MD,p.YN,i.bv,E]}),s})()}}]);